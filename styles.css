/*  White Nights / MAX WebApp â€” Polished Telegram-ready UI  */

:root{
  --bg:#0a0f1a; --bg2:#0c1424; --panel:rgba(14,20,34,.72);
  --elev:rgba(14,20,34,.86);
  --border:#1f2b40; --border-strong:#2a3a58;
  --text:#eaf1fb; --muted:#9fb1cc; --muted-2:#7f90aa;
  --acc1:#36a8ff; --acc2:#6a5cff; --acc3:#22c55e; --warn:#f59e0b; --err:#ef4444;
  --glow:#3aa7ff3d; --glow-2:#6a5cff30;
  --shadow:0 10px 30px #0008;
  --radius:16px; --radius-sm:12px; --radius-lg:20px;
  --focus:#3b82f6; --focus-ring:0 0 0 3px #3b82f633;
  --inset:inset 0 1px 0 #ffffff1a;
}
@media (prefers-color-scheme: light){
  :root{
    --bg:#f6f8fc; --bg2:#eef3ff; --panel:rgba(255,255,255,.82); --elev:#fff;
    --border:#d7e1f2; --border-strong:#c3d2ef;
    --text:#0b1220; --muted:#4b5a72; --muted-2:#64748b;
    --glow:#3aa7ff29; --glow-2:#6a5cff24; --shadow:0 6px 24px #00102914;
  }
}
:root.tg-compact{ --radius:14px; --radius-sm:10px; }

*{box-sizing:border-box}
html,body{height:100%;margin:0}

body{
  color:var(--text); font:15px/1.45 system-ui,Segoe UI,Roboto,Arial;
  background:
    radial-gradient(1000px 680px at 105% -10%, #1b2a42 0%, transparent 60%),
    radial-gradient(900px 520px at -10% 110%, #13253f 0%, transparent 60%),
    linear-gradient(180deg, var(--bg), var(--bg2));
  animation:bgMove 16s linear infinite alternate;
}
@keyframes bgMove{to{background-position:12% 0, 88% 100%, 0 0}}

.app{max-width:960px;margin:0 auto;padding:16px;min-height:100vh;height:100vh;display:flex;flex-direction:column;gap:14px;animation:fadeIn .22s ease-out}
@supports(height:100svh){.app{min-height:100svh;height:100svh;padding-top:calc(16px + env(safe-area-inset-top));padding-bottom:calc(16px + env(safe-area-inset-bottom))}}
@keyframes fadeIn{from{opacity:0;transform:translateY(6px)}}

.card{background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);padding:16px;display:flex;flex-direction:column;gap:12px;position:relative;overflow:hidden;box-shadow:var(--shadow),var(--inset);backdrop-filter:saturate(120%) blur(10px)}
.card::before{content:"";position:absolute;inset:0;pointer-events:none;background:linear-gradient(130deg,transparent,#fff2,transparent 60%);mix-blend-mode:overlay;opacity:.28}
.card.compact{padding:12px;border-radius:var(--radius-sm)}
.card{max-height:calc(100vh - 32px);overflow:auto;overscroll-behavior:contain;-webkit-overflow-scrolling:touch}
@supports(height:100svh){.card{max-height:calc(100svh - 32px)}}
.card .back{position:sticky;bottom:0;z-index:1;margin-top:8px}

.hidden{display:none!important}

h1,h2{margin:0 0 10px}
h1{font-size:22px;letter-spacing:.2px}
h2{font-size:18px;color:var(--muted)}

.grid{display:grid;gap:10px;grid-template-columns:repeat(2,1fr)}
@media (min-width:640px){.grid{grid-template-columns:repeat(3,1fr)}}
@media (max-width:480px){.grid{grid-template-columns:1fr}}

label{display:block;margin:8px 0 6px;color:var(--muted);font-size:13px}
input,button,select,textarea{width:100%;border-radius:var(--radius-sm);border:1px solid var(--border);color:var(--text);background:linear-gradient(180deg,#0f1728,#0c1424);padding:12px 14px;transition:transform .12s ease,box-shadow .2s ease,border-color .2s ease,background .2s ease}
input::placeholder,textarea::placeholder{color:var(--muted-2)}
input:focus-visible,select:focus-visible,textarea:focus-visible{outline:none;border-color:var(--focus);box-shadow:var(--focus-ring);background:#0f1b30}

button{position:relative;cursor:pointer;background:linear-gradient(135deg,var(--acc1),var(--acc2));border:0;font-weight:800;letter-spacing:.2px;color:#fff;box-shadow:0 8px 22px #0009,0 0 0 0 var(--glow)}
button:hover{transform:translateY(-1px);box-shadow:0 12px 26px #000a,0 0 0 6px var(--glow)}
button:active{transform:translateY(0);box-shadow:0 8px 22px #0009}
button:disabled{opacity:.6;cursor:not-allowed}
button.secondary{background:linear-gradient(180deg,#0b1324,#0a111b);color:var(--text);border:1px solid var(--border-strong)}
button.danger{background:linear-gradient(135deg,#ef4444,#b91c1c)}
button.success{background:linear-gradient(135deg,#22c55e,#16a34a)}
button::after{content:"";position:absolute;inset:0;border-radius:inherit;pointer-events:none;background:radial-gradient(200px 200px at var(--rx,50%) var(--ry,50%),#fff3,transparent 40%);opacity:0;transition:opacity .6s ease}
button.rippling::after{opacity:1}
.btn-active,button[disabled].btn-active{background:linear-gradient(135deg,#16a34a,#22c55e);cursor:default;box-shadow:0 6px 18px #0007,0 0 0 0 #16a34a40}

pre{white-space:pre-wrap;background:#0a111b;border:1px solid #132033;border-radius:var(--radius-sm);padding:12px;color:#dbe8ff}

.chat{flex:1;min-height:180px;overflow:auto;display:flex;flex-direction:column;gap:10px;padding:10px;background:#0a111b;border:1px solid #132033;border-radius:14px}
.bubble{max-width:95%;padding:10px 12px;border-radius:14px;font-size:14px;line-height:1.35;animation:bub .2s ease both;box-shadow:0 6px 16px #0007}
@keyframes bub{from{opacity:0;transform:translateY(6px)}}
.bubble .meta{opacity:.7;font-size:12px;margin-top:4px}
.b-user{align-self:flex-end;background:linear-gradient(135deg,#1d2e48,#13253f);border:1px solid #274165}
.b-admin{align-self:flex-start;background:linear-gradient(135deg,#1c3a22,#142818);border:1px solid #2e4a32}
.b-system{align-self:center;background:linear-gradient(135deg,#212636,#161b29);border:1px solid #2b3547}

.row{display:flex;gap:10px;margin-top:8px;flex-wrap:wrap}

.case-wrap{position:relative;height:124px;border:1px solid #132033;border-radius:14px;background:linear-gradient(180deg,#0d1628,#0a111b);overflow:hidden;box-shadow:inset 0 1px 0 #fff1,0 6px 16px #0007}
#case-strip{position:absolute;left:0;top:0;height:100%;display:flex;gap:10px;will-change:transform;padding:12px}
.case-tile{min-width:120px;height:100%;border-radius:12px;display:flex;flex-direction:column;align-items:center;justify-content:center;background:#0f1728;border:1px solid #20314a;box-shadow:inset 0 1px 0 #fff1,0 4px 10px #0006;font-weight:800;font-size:18px;letter-spacing:.3px}
.case-tile .icon{font-size:28px;margin-bottom:4px;filter:drop-shadow(0 0 6px #5aa2ff66)}
#case-pointer{position:absolute;left:50%;top:0;bottom:0;width:0}
#case-pointer::after{content:"";position:absolute;left:-1px;top:0;bottom:0;width:2px;background:linear-gradient(180deg,transparent,#4fa0ff,transparent);box-shadow:0 0 10px #4fa0ff88}
.ru-result{margin-top:8px;font-size:16px}

.notify-root{position:fixed;right:12px;top:12px;z-index:1000;display:flex;flex-direction:column;gap:10px;pointer-events:none}
.notif{min-width:240px;max-width:360px;pointer-events:auto;border-radius:var(--radius-sm);padding:12px 14px;font-weight:700;background:var(--elev);border:1px solid var(--border-strong);color:var(--text);box-shadow:var(--shadow),var(--inset);display:flex;gap:10px;align-items:flex-start;position:relative;animation:notif-in .18s ease-out both}
.notif .title{font-size:14px;margin-bottom:4px;opacity:.9}
.notif .msg{font-size:13px;opacity:.85}
.notif .x{position:absolute;right:8px;top:8px;width:26px;height:26px;border-radius:8px;border:1px solid var(--border-strong);background:#0b1324;color:#9fb1cc;cursor:pointer;display:grid;place-items:center;font-weight:800}
.notif.info{border-color:#245ba3}
.notif.success{border-color:#1f6d3a;background:linear-gradient(180deg,#0e1f17,#0b1511)}
.notif.error{border-color:#7b2c2c;background:linear-gradient(180deg,#1a1010,#120b0b)}
@keyframes notif-in{from{opacity:0;transform:translateY(-6px)}}
.notify-modal{position:fixed;inset:0;z-index:1001;display:grid;place-items:center}
.notify-modal.hidden{display:none}
.notify-backdrop{position:absolute;inset:0;background:#0008;backdrop-filter:blur(2px)}
.notify-dialog{position:relative;z-index:1;width:min(92vw,420px);background:var(--panel);border:1px solid var(--border);border-radius:16px;padding:16px;box-shadow:0 18px 50px #000a, inset 0 1px 0 #fff2}
.notify-title{font-weight:800;margin-bottom:8px}
.notify-content{opacity:.9;margin-bottom:12px}
.notify-btn{width:100%;border:0;border-radius:12px;padding:12px;background:linear-gradient(135deg,var(--acc1),var(--acc2));color:#fff;font-weight:800}

.priv-summary{padding:10px;border:1px solid var(--border);border-radius:12px;background:#0a111b}
.plans{display:grid;grid-template-columns:1fr;gap:12px}
@media (min-width:600px){.plans{grid-template-columns:repeat(2,1fr)}}
@media (min-width:900px){.plans{grid-template-columns:repeat(3,1fr)}}
.plan{background:#0f1728;border:1px solid var(--border-strong);border-radius:16px;padding:14px;display:flex;flex-direction:column;gap:10px;box-shadow:inset 0 1px 0 #fff1}
.plan-badge{font-size:12px;color:#a6ceff;background:#0b1324;border:1px solid #274165;border-radius:999px;padding:4px 8px;width:max-content}
.plan-badge.muted{opacity:.8;border-color:#38445f}
.plan-title{font-weight:900;font-size:16px}
.plan-feats{margin:0;padding-left:18px;display:flex;flex-direction:column;gap:4px}
.plan-price{font-weight:900;font-size:18px}
.plan-note{font-size:12px;opacity:.75}
.plan-price.hidden{display:none}

.contest-list{display:grid;gap:10px}
.contest-card{background:#0f1728;border:1px solid var(--border-strong);border-radius:14px;padding:12px;display:grid;gap:8px}
.contest-title{font-weight:900;font-size:16px}
.contest-meta{font-size:13px;opacity:.85;display:flex;gap:12px;flex-wrap:wrap}
.contest-actions{display:flex;gap:10px;flex-wrap:wrap}
.contest-actions .secondary{background:#0b1324;border:1px solid #2a3960}

@media (max-width:480px){
  .app{padding:12px}
  .card{padding:12px}
}

.hr{height:1px;background:linear-gradient(90deg,transparent,var(--border),transparent);border:0;margin:8px 0}
.badge{display:inline-flex;align-items:center;gap:6px;height:28px;padding:0 10px;border-radius:999px;border:1px solid var(--border-strong);background:linear-gradient(180deg,#0b1324,#09101d);font-weight:700;font-size:12px;color:var(--muted)}
.kbd{font:600 12px/1.2 ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;background:#0d1424;padding:4px 6px;border-radius:6px;border:1px solid #2a3960}

@media (prefers-reduced-motion: reduce){
  *{animation:none!important;transition:none!important}
}
